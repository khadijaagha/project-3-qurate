{% extends 'base.html' %}

{% block content %}
  <h1>Messages</h1>

  <container class="msg-container">
    <section class="message-list">
      {% for message in messages %}
        {% if message.sender == request.user %}
          <div class="user-msg">
            <p>Sender: {{ message.sender }}</p>
            <p>Body: {{ message.body }}</p>
            <p>Timestamp: {{ message.timestamp }}</p>
          </div>
        {% else %}
          <div class="rec-msg">
            <p>Sender: {{ message.sender }}</p>
            <p>Body: {{ message.body }}</p>
            <p>Timestamp: {{ message.timestamp }}</p>
          </div>
        {% endif %}
      {% empty %}
        <p>No messages available.</p>
      {% endfor %}
    </section>

    <form method="POST" action="{% url 'send_message' receiver_id=receiver.id %}">
      {% csrf_token %}
      <textarea name="body" placeholder="Enter your message"></textarea>
      <button type="submit">Send Message</button>
    </form>
  </container>
{% endblock %}